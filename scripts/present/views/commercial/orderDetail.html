<ion-view view-title="订单详情" class="ion-view-bg">

    <ion-content class="has-header">
        <!--订单属性展示-->
        <table class="table table-striped" style="margin:10px;width:99%;">
            <tr>
                <td>订单编号</td>
                <td>收货地址（可物流部分）</td>
                <td>购买人/电话</td>
                <td>订单状态</td>
                <td>下单时间</td>
                <td>订单实付款/原总价</td>
                <td>相关店铺</td>
                <td>订单备注</td>
            </tr>
            <tr>
                <td data-toggle="tooltip" data-placement="top" title="{{orderData.tradeNo}}">{{orderData.tradeNo}}</td>
                <td data-toggle="tooltip" data-placement="top" title="{{orderData.snapshootAddress}}">{{orderData.snapshootAddress.split('|')[1]+orderData.snapshootAddress.split('|')[2]+orderData.snapshootAddress.split('|')[3]}}</td>
                <td data-toggle="tooltip" data-placement="top">{{orderData.snapshootAddress.split('|')[4]+" / "+orderData.snapshootAddress.split('|')[5]}}</td>
                <td data-toggle="tooltip" data-placement="top" title="{{orderData.eOrderState|orderStatusFilter}}">{{orderData.eOrderState|orderStatusFilter}}</td>
                <td data-toggle="tooltip" data-placement="top" title="{{orderData.date+orderData.time}}">{{orderData.date+" "+orderData.time}}</td>
                <td data-toggle="tooltip" data-placement="top">{{orderData.totalPayPrice+" / "+orderData.totalOriginalPrice}}</td>
                <td data-toggle="tooltip" data-placement="top">{{orderData.title}}</td>
                <td data-toggle="tooltip" data-placement="top" title="{{orderData.remark}}">{{orderData.remark}}</td>
            </tr>
        </table>
        <!--订单操作栏-->
        <div class="btn-group" data-toggle="buttons" style="float:right; margin-right:10px;">
            <button type="button" class="btn btn-danger" ng-if="orderData.eOrderState==21" ng-click="openDisDeliverModal()">拒绝订单</button>
        </div>
        <!--订单内商品展示-->
        <div ng-repeat="group in orderData.groups">
            <div class="panel panel-default" style="margin:10px; margin-top:55px;">
                <div class="panel-heading">
                    <h3 class="panel-title">店铺名(分组) : <span class="SourceHanSansFontBlod" style="color:orange;font-weight:500;">{{group.groupName}} </span>    |   实付款 <span style="color:red;">{{group.groupPayPrice}}元</span></h3>
                </div>
                <div class="panel-body">
                    <div class="item-content flex flex-hw">
                        <div class="card flex1 flex-20" style="max-width:180px;height:250px;position:relative;" ng-repeat="cargo in group.goods">
                            <div class="mum-card {{cargo.isSelect}}">
                                <!--订单状态角标-->
                                <div style="position:absolute;right:0px;z-index:10; text-align:right;">
                                    <p class="SourceHanSansFontBlod" style="font-size: 14px;color: red;font-weight: 900;padding: 5px;background-color: #fff;">{{cargo.eGoodState|cargoStatusFilter}}</p>
                                </div>
                                <img ng-src="{{cargo.faceImgUrl|imgCdnFilter}}" style="width: 180px; margin-bottom:15px;" ng-click="selectTrolleyElement(cargo)" />
                                <div class="item-content SourceHanSansCN text-center">
                                    <span>购买 {{cargo.goodName}}×{{cargo.amount}} 份</span>
                                </div>
                                <div class="item item-text-wrap item-borderless SourceHanSansCN" style="font-size:14px; background-color:transparent; text-align:center; bottom:10px;">
                                    规格：{{cargo.goodStandName}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ion-content>

    <div class="mum-footer" ng-if="goods!=null">
        <button type="button" ng-if="orderData.eOrderState>=21&&goods.eGoodState==1" class="btn btn-primary" ng-click="openDeliverModal(goods)" style="display:inline;width:10%;margin:15px auto;">
            <span class="glyphicon glyphicon-ok"></span><span style="margin-left:5px;">发货</span>
        </button>
        <button type="button" ng-if="orderData.eOrderState>=21&&goods.eGoodState==21" class="btn btn-primary" ng-click="agreeReturn(goods)" style="display:inline;width:10%;margin:15px auto;">
            <span class="glyphicon glyphicon-ok"></span><span style="margin-left:5px;">同意退货</span>
        </button>
        <button type="button" ng-if="orderData.eOrderState>=21&&goods.eGoodState==21" class="btn btn-primary" ng-click="disagreeReturn(goods)" style="display:inline;width:10%;margin:15px auto;">
            <span class="glyphicon glyphicon-remove"></span><span style="margin-left:5px;">拒绝退货</span>
        </button>
        <button type="button" ng-if="orderData.eOrderState>=21&&orderData.eOrderState<61&&goods.eGoodState>=21&&goods.eGoodState<=41" class="btn btn-danger" ng-click="refundOrder(goods)" style="display:inline;width:10%;margin:15px auto;">
            <span class="glyphicon glyphicon-usd"></span><span style="margin-left:5px;">退款</span>
        </button>
    </div>

</ion-view>